"use strict";(()=>{var e={};e.id=84,e.ids=[84],e.modules={3524:e=>{e.exports=require("@prisma/client")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7421:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>w});var a={};t.r(a),t.d(a,{GET:()=>c,POST:()=>d});var s=t(5419),i=t(9108),n=t(9678),o=t(8070);let u=new(t(3524)).PrismaClient;async function c(){try{let e=await u.service.findMany({where:{published:!0},orderBy:{createdAt:"desc"},include:{author:{select:{name:!0,email:!0}}}});return o.Z.json(e)}catch(e){return console.error("Error fetching services:",e),o.Z.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{title:r,description:t,image:a,features:s}=await e.json();if(!r||!t)return o.Z.json({error:"Title and description are required"},{status:400});let i=r.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),n=await u.user.findFirst({where:{email:"admin@elevate.com"}});n||(n=await u.user.create({data:{name:"Admin",email:"admin@elevate.com",password:"hashed_password",role:"ADMIN"}}));let c=await u.service.create({data:{title:r,slug:i,description:t,image:a,features:s||[],published:!0,authorId:n.id}});return o.Z.json(c,{status:201})}catch(e){return console.error("Error creating service:",e),o.Z.json({error:"Internal server error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/services/route",pathname:"/api/services",filename:"route",bundlePath:"app/api/services/route"},resolvedPagePath:"C:\\Users\\ainan\\OneDrive\\Documents\\elevate\\src\\app\\api\\services\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:v,serverHooks:m,headerHooks:h,staticGenerationBailout:w}=l,f="/api/services/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,206],()=>t(7421));module.exports=a})();